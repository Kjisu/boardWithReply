<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/layout/basic :: setContent(~{this:: content})}">
<head>
    <meta charset="UTF-8">
    <title>목록페이지</title>
</head>
<body>

<th:block th:fragment="content">

  <h1 class="mt-4">목록 페이지</h1>

  <!-- 목록 리스트 시작-->
  <table class="table table-striped">
    <tr>
      <th scope="col">번호</th>
      <th scope="col">제목</th>
      <th scope="col">작성자</th>
      <th scope="col">등록일</th>
    </tr>
    <tr th:each="dto:${result.dtoList}">
      <td>[[${dto.bno}]]</td>
      <td>
        <a th:href="@{/board/read(bno=${dto.bno},page=${pageRequestDTO.page},type=${pageRequestDTO.type},keyword=${pageRequestDTO.keyword})}">
          [[${dto.title}]]------[<b>[[${dto.replyCount}]]</b>]
        </a>
      </td>
      <td>[[${dto.writerEmail}]]</td>
      <td th:text="${#temporals.format(dto.regDate,'yyyy/MM/dd')}"></td>
    </tr>
  </table>
  <!-- 목록 리스트 끝-->

  <!--페이지 번호 출력 시작-->
  <ul class="pagination h-100 justify-content-center align-items-center">
    <li class="page-item" th:if="${result.prev}">
      <a th:href="@{/board/list(page=${result.start-1},type=${pageRequestDTO.type},keyword=${pageRequestDTO.keyword})}" tabindex="-1">
        이전</a>
    </li>
    <li class="page-item" th:each="page:${result.pageList}" th:class=" 'page-item ' + ${result.page == page? 'active':''} ">
      <a th:href="@{/board/list(page=${page},type=${pageRequestDTO.type},keyword=${pageRequestDTO.keyword})}">
        [[${page}]]</a>
    </li>
    <li class="page-item" th:if="${result.next}">
      <a th:href="@{/board/list(page=${result.end+1},type=${pageRequestDTO.type},keyword=${pageRequestDTO.keyword})}" tabindex="-1">
        다음</a>
    </li>
  </ul>
  <!--페이지 번호 출력 끝-->

  <!--등록 버튼 시작 -->
  <span>
    <a href="/board/register">
      <button type="button" class="btn btn-outline-primary">게시글 등록</button>
    </a>
  </span>
  <!--등록 버튼 끝-->

  <!--검색form 시작-->
  <!--검색form 끝-->


  <!--JS-->
  <script th:inline="javascript">

    //삭제 처리 후
    $(document).ready(function(){

      var msg = [[${msg}]];

      console.log("삭제된 게시글 번호="+msg);

      if(msg !== null){
        alert("삭제되었습니다.");
      }
    });

  </script>

</th:block>

</body>
</th:block>
</html>